// See jquery.imscpTooltip-dev.js
(function(e){function o(t){return e.data(t,"imscpTooltip")}function u(n){if(t.parent){return}t.parent=e('<div id="'+n.id+'"><div class="tooltipBody"></div></div>').appendTo(document.body).hide();if(e.fn.bgiframe){t.parent.bgiframe()}t.body=e("div.tooltipBody",t.parent)}function a(t){if(o(this).delay){i=setTimeout(l,o(this).delay)}else{l()}s=!o(this).followCursor;e(document.body).bind("mousemove",c);c(t)}function f(){if(this==n||!this.tooltipText){return}n=this;r=this.tooltipText;t.body.html(r).show();t.parent.addClass(o(this).extraClass);a.apply(this,arguments)}function l(){i=null;if(o(n).fade){if(t.parent.is(":animated")){t.parent.stop().show().fadeTo(o(n).fade,n.tOpacity)}else{t.parent.is(":visible")?t.parent.fadeTo(o(n).fade,n.tOpacity):t.parent.fadeIn(o(n).fade)}}else{t.parent.show()}c()}function c(r){if(r&&r.target.tagName=="OPTION"){return}if(!s&&t.parent.is(":visible")){e(document.body).unbind("mousemove",c)}if(n==null){e(document.body).unbind("mousemove",c);return}t.parent.removeClass("viewport-right").removeClass("viewport-bottom");var i=t.parent[0].offsetLeft;var u=t.parent[0].offsetTop;if(r){i=r.pageX+o(n).left;u=r.pageY+o(n).top;var a="auto";if(o(n).positionLeft){a=e(window).width()-i;i="auto"}t.parent.css({left:i,right:a,top:u})}var f=h(),l=t.parent[0];if(f.x+f.cx<l.offsetLeft+l.offsetWidth){i-=l.offsetWidth+20+o(n).left;t.parent.css({left:i+"px"}).addClass("viewport-right")}if(f.y+f.cy<l.offsetTop+l.offsetHeight){u-=l.offsetHeight+20+o(n).top;t.parent.css({top:u+"px"}).addClass("viewport-bottom")}}function h(){return{x:e(window).scrollLeft(),y:e(window).scrollTop(),cx:e(window).width(),cy:e(window).height()}}function p(e){function s(){t.parent.removeClass(r.extraClass).hide().css("opacity","")}if(i){clearTimeout(i)}n=null;var r=o(this);if(r.fade){if(t.parent.is(":animated")){t.parent.stop().fadeTo(r.fade,0,s)}else{t.parent.stop().fadeOut(r.fade,s)}}else{s()}}var t={},n,r,i,s=true;e.imscpTooltip={defaultsSettings:{msg:"",opacity:.85,top:10,left:10,delay:200,fade:true,extraClass:"",id:"imscpTooltip"}};e.fn.extend({imscpTooltip:function(n){settings=e.extend({},e.imscpTooltip.defaultsSettings,n);u(settings);return this.each(function(){if(settings.msg||this.title){e.data(this,"imscpTooltip",settings);this.tOpacity=t.parent.css("opacity");this.tooltipText=settings.msg||this.title;e(this).removeAttr("title");this.alt="";e(this).mouseover(f).mouseout(p).click(p)}})}})})(jQuery)
